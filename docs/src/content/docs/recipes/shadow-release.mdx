---
title: Shadow Release
draft: false
sidebar:
  order: 5
---

import { Code } from 'astro:components';
import EditorLink from '../../../components/EditorLink.astro';
import shadowRelease from '@examples/shadow-release/gateway.ts?raw';

## Use Case

Mirror production traffic to a new upstream version without affecting user responses.

## Recipe

<Code code={shadowRelease} lang="ts" title="examples/shadow-release/gateway.ts" />
<EditorLink code={shadowRelease} title="Shadow Release" />

## Why it works

- Primary responses still come from stable v1.
- v2 receives realistic traffic for verification.
- Shadow failures do not impact users.

## Operational tip

Use the adapter `waitUntil` capability in Cloudflare (`cloudflareAdapter({ executionCtx })`) so shadow requests continue even after the primary response is returned.
