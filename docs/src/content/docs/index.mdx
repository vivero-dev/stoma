---
title: Stoma
description: Declarative API gateway as a TypeScript library. Runs on Cloudflare Workers, Node.js, Deno, Bun, and any JavaScript runtime.
template: splash
hero:
  tagline: Declarative API gateway as a TypeScript library. <br /><br />Strongly typed, ultra-light, blazing fast -- runs on any JavaScript runtime.
  image:
    html: <img src="/leaf-bg-trees.jpg" alt="A lush canopy of green leaves" />
  actions:
    - text: Get Started
      link: /getting-started/installation/
      icon: right-arrow
      variant: primary
    - text: Open Editor
      link: /editor
      icon: pencil
      variant: secondary
    - text: View on GitHub
      link: https://github.com/HomeGrower-club/stoma
      icon: external
      variant: minimal
---

import { Card, CardGrid, Tabs, TabItem, Steps, Aside } from "@astrojs/starlight/components";
import Playground from "../../components/Playground.tsx";

_Named after the tiny pores in plant leaves that regulate what passes through,
Stoma gives you the same fine-grained control over your API traffic._

## What is Stoma?

Stoma is a **declarative API gateway you define in TypeScript** and deploy
with your standard workflow. Instead of maintaining a separate proxy service
with YAML files or admin dashboards, you define routes, policies, and upstreams
as typed objects in your codebase -- version-controlled, PR-reviewed, and
deployed through your existing pipeline.

- **Gateway as code.** Your entire gateway configuration is TypeScript. Version
  it in Git, review changes in PRs, roll back with a standard deploy.
- **Type-safe from config to runtime.** Routes, policies, and upstreams are all
  typed. Misconfigure a JWT policy? Your editor catches it before your users do.
- **Deploy anywhere.** Cloudflare Workers, Node.js, Deno, Bun, Lambda@Edge --
  as part of your application or as a standalone service.
- **Batteries included.** Built-in policies across auth, traffic control,
  resilience, and transformation -- composable, priority-ordered, and
  individually tree-shakeable.

### Even in the browser...

<Playground client:load client:only="react"/>

---

## Why Stoma?

API gateways in the JavaScript ecosystem are often stuck between two suboptimal paths:

1.  **Heavy Infrastructure:** Kong, KrakenD, or AWS API Gateway. Powerful, but separate services configured with YAML, operating independently from your code. You lose type safety and pay for extra infrastructure.
2.  **Legacy Libraries:** Older libraries like Express Gateway are often unmaintained, locked to legacy frameworks, and not built for modern edge runtimes.

**Stoma is the third option: a declarative gateway library that lives in your codebase and deploys with your standard workflow.**

<CardGrid>
  <Card title="Gateway as Code" icon="seti:typescript">
    Configured with **code, not YAML**. Version your gateway in Git, review changes in PRs, and rollback instantly with your standard deployment pipeline.
    [Read More](/concepts/configuration/)
  </Card>
  <Card title="Type-Safe Ergonomics" icon="pencil">
    Full type safety from configuration to runtime. Your editor provides autocomplete for policies and upstreams, catching mistakes before your users do.
    [Read More](/guides/type-safe-bindings/)
  </Card>
  <Card title="No Extra Infrastructure" icon="rocket">
    No sidecars, no control planes, no admin UIs. Define your gateway in code and deploy it with your existing pipeline.
    [Read More](/getting-started/installation/)
  </Card>
  <Card title="Multi-runtime" icon="external">
    Runs on Cloudflare Workers, Node.js, Deno, Bun, Fastly, Lambda@Edge, and more -- using standard Web APIs.
    [Read More](/getting-started/installation/)
  </Card>
</CardGrid>

---

## Developer Experience First

Stoma is built by developers, for developers. We believe your gateway should be as easy to maintain as your application code.

<CardGrid>
  <Card title="Git Versionable" icon="comment-discussion">
    No more "hidden" configuration in an Admin UI. Your routes and policies live in your repo, making it easy to see *why* a change was made.
    [Read More](/guides/config-splitting/)
  </Card>
  <Card title="Composable" icon="puzzle">
    Split large gateways into multiple modules. Use standard TypeScript patterns to share policies and route definitions across projects.
    [Read More](/guides/config-splitting/)
  </Card>
  <Card title="Local Development" icon="laptop">
    Run your entire gateway locally with `node`, `bun`, `wrangler dev`, or any runtime. No need for complex Docker setups just to test a rate limit.
    [Read More](/getting-started/local-development/)
  </Card>
  <Card title="Type-Aware Pipelines" icon="check-selection">
    Built-in policies are fully typed. If a policy requires a specific configuration, TypeScript will tell you immediately.
    [Read More](/concepts/policies/)
  </Card>
</CardGrid>

---

## Build a Gateway in Seconds

<Steps>

1.  **Install the library**
    ```bash
    npm install @vivero/stoma hono
    ```

2.  **Define your configuration**
    Create a `GatewayConfig` that describes your routes, policies, and upstreams.

    ```typescript
    import { createGateway, jwtAuth, rateLimit, requestLog, cors, health } from "@vivero/stoma";

    const gateway = createGateway({
      name: "my-api",
      basePath: "/api",
      policies: [requestLog(), cors()],
      routes: [
        health(), // Built-in health check
        {
          path: "/users/*",
          pipeline: {
            policies: [
              jwtAuth({ secret: "env:JWT_SECRET" }),
              rateLimit({ max: 100, windowSeconds: 60 }),
            ],
            upstream: {
              type: "url",
              target: "https://users-api.internal.example.com",
            },
          },
        },
      ],
    });

    export default gateway.app;
    ```

3.  **Deploy anywhere**
    Export as a module for Cloudflare Workers, or serve with Node.js, Deno, or Bun. The output is a standard Hono app.

</Steps>

---

## What do you need?

<CardGrid>
  <Card title="I need to add auth/rate-limiting">
    Start with the [Quick Start](/getting-started/quick-start/) to see how policies like JWT auth and rate limiting work together.
  </Card>
  <Card title="I need a production-ready pattern">
    Browse [Recipes](/recipes/) for copy-paste solutions like webhook protection, caching, and shadow traffic.
  </Card>
  <Card title="I need a specific policy">
    Explore [Policies](/policies/) by category: Auth, Traffic, Resilience, Transform.
  </Card>
  <Card title="I need to write a custom policy">
    Learn [Policy Authoring](/policy-authoring/your-first-policy/) to extend Stoma with your own middleware.
  </Card>
</CardGrid>

---

## Comparison

| Feature | Stoma | Kong | KrakenD | Express Gateway |
|---------|-------|------|---------|-----------------|
| **Configuration** | **TypeScript (Type-safe)** | YAML / Admin API | JSON | YAML / JSON |
| **Execution** | **TypeScript Library** | Separate Service | Separate Binary | Middleware |
| **Language** | TypeScript | Lua / Go | Go | JavaScript |
| **Multi-runtime** | **Yes (Edge & Server)** | No (Container) | No (Binary) | No (Node only) |
| **Bundle size** | **Lightweight (Core)** | 100MB+ Image | 80MB+ Binary | 50MB+ Modules |
| **Status** | **Active** | Active | Active | Unmaintained |

[See full comparison â†’](/guides/comparison/)

---

## Batteries Included: Comprehensive Built-in Policies

Stoma ships with a comprehensive suite of policies, sorted into logical categories to handle every aspect of your API lifecycle.

<CardGrid>
  <Card title="Authentication" icon="lock">
    JWT, API Key, Basic Auth, OAuth2 Introspection, RBAC, JWS, and RFC 9421 HTTP Signatures.
    [Read More](/policies/auth/)
  </Card>
  <Card title="Traffic Control" icon="random">
    Rate Limiting, IP/Geo Filtering, Caching, SSL Enforcement, JSON Threat Protection, and Traffic Shadowing.
    [Read More](/policies/traffic/)
  </Card>
  <Card title="Resilience" icon="warning">
    Circuit Breakers, Retries, Timeouts, and Latency Injection for testing.
    [Read More](/policies/resilience/)
  </Card>
  <Card title="Transformation" icon="document">
    CORS, Request/Response Rewriting, JSON Validation, and Content Assignment.
    [Read More](/policies/transform/)
  </Card>
</CardGrid>

---

## Platform-Specific Power

While Stoma is runtime-agnostic, it can leverage platform-specific features like **Cloudflare Service Bindings** for zero-latency communication between Workers.

[Read More about Upstreams](/concepts/upstreams/)

<Tabs>
  <TabItem label="Cloudflare Workers">
    ```typescript
    upstream: {
      type: "service-binding",
      service: "USERS_SERVICE",
    }
    ```
    *Declare in `wrangler.jsonc` for high-performance Worker-to-Worker routing.*
  </TabItem>
  <TabItem label="Universal Proxy">
    ```typescript
    upstream: {
      type: "url",
      target: "https://api.example.com",
    }
    ```
    *Works on any runtime (Node.js, Deno, Bun) using standard `fetch`.*
  </TabItem>
</Tabs>

---

## Next Steps

<CardGrid>
  <Card title="Quick Start" icon="rocket">
    Build your first gateway in minutes.
    [Go to Quick Start](/getting-started/quick-start/)
  </Card>
  <Card title="Policy Reference" icon="list-format">
    Explore the full list of built-in policies.
    [Browse Policies](/policies/auth/)
  </Card>
  <Card title="Architecture" icon="setting">
    Understand the request lifecycle and core concepts.
    [How it works](/concepts/architecture/)
  </Card>
  <Card title="Recipes" icon="magnifier">
    Production-ready patterns and copy-paste examples.
    [View Recipes](/recipes/)
  </Card>
</CardGrid>

<Aside type="tip">
  Stoma is currently on it's version 0.1.0 RC, but is used in production to power high-performance, multi-tenant API gateways.
</Aside>

